# CausalImpact

## 패키지 소개 요약

### CausalImpact는 무엇일까?

- 시계열 데이터에서 의도적인 개입으로 인한 인과 효과를 추정하기 위한 방법론이다.
- "광고 캠페인을 적용했을 때 일별 클릭수는 얼마나 증가했을까?" 같은 질문은 실험이 불가능한 상황에서 답변하는 것이 매우 어렵다.

### 어떻게 동작할까?

- 결과 변수에 해당하는 시계열과 (예. 클릭수) 통제 변수에 해당하는 시계열 (예. 개입이 적용되지 않은 영역의 클릭수 또는 다른 사이트의 클릭수)가 주어졌을 때, Bayesian Structural time-series model 을 구축한다.
- 학습한 시계열 모형을 통해 counterfactual 을 예측하다. 다시 말해, 만약 특정 시점에 개입이 일어나지 않았다면 그 이후에 지표가 어떻게 되었을지를 예측한다.

### 모형이 어떤 가정을 하고 있을까?

1. 통제 변수(Control) 역할을 하는 시계열은 개입의 영향을 받지 않아야 한다.
2. 개입 이전 시점의 공변량과 결과 변수의 관계가 개입 이후에도 유지되어야 한다.
    - 이 가정을 완화시키고 싶을 경우 dynamic regression 을 추가로 적용할 수 있다.
3. 모형에 Prior가 포함되어 있다는 사실을 명심해야 한다.
    - CausalImpact가 기본적으로 시계열 학습에 사용하는 모형은 Local Level 을 위해 Gaussian random walk 를 사용하는데, 이 때 random walk의 표준 편차에 Prior가 설정되어 있다.

### 모형의 가정을 만족하는지 어떻게 확인할 수 있을까?

다음과 같은 방법으로 시작해보자.

1. 왜 모형에 포함된 공변량들이 개입의 영향을 받지 않았는지 고민해야 한다.
    - 모든 공변량을 그래프로 그려서 시각적으로 확인해 볼 필요도 있다.
2. 개입 이전 시점까지의 시계열을 얼마나 잘 예측하는지 확인해야 한다. 임의의 시점에 가상의 개입이 이루어졌다고 가정하고 모형을 학습하면 어떤 결론이 나오는지 확인해본다. 이 때 counterfactual 예측과 실제값이 비슷해서 통계적으로 유의미하지 않은 결론이 나와야 한다.
3. 모형의 학습 결과를 공유할 때는 가정한 내용들과 모형의 파라미터를 포함하여 공유한다. 다른 사람들과 함께 유효한 가정인지, 적절한 파라미터를 사용한 것인지 논의하는 것이 좋다.
